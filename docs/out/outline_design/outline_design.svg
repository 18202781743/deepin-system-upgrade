<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="932px" preserveAspectRatio="none" style="width:487px;height:932px;background:#FFFFFF;" version="1.1" viewBox="0 0 487 932" width="487px" zoomAndPan="magnify"><defs/><g><ellipse cx="297" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="245" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84" x="255" y="75.8881">升级前环境检查</text><polygon fill="#F1F1F1" points="228.5,109.8001,365.5,109.8001,377.5,121.8001,365.5,133.8001,228.5,133.8001,216.5,121.8001,228.5,109.8001" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="228.5" y="127.2891">环境检查是否满足升级条件?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="205.5" y="118.2142">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="377.5" y="118.2142">否</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="149" x="101" y="143.8001"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="129" x="111" y="169.6882">下载V23镜像根目录数据</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="129.5" y="203.6003"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="139.5" y="229.4884">备份当前系统</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="209" x="71" y="263.4004"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="189" x="81" y="289.2885">解压V23镜像根目录数据到临时目录</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="141.5" y="323.2006"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48" x="151.5" y="349.0887">更改引导</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="329" x="11" y="383.0007"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="309" x="21" y="408.8888">重启后在initrd中使用临时根目录构建/目录树，进入新系统</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="141.5" y="442.8008"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48" x="151.5" y="468.6889">数据迁移</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="123.5" y="502.601"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84" x="133.5" y="528.4891">新系统问题检测</text><polygon fill="#F1F1F1" points="131.5,562.4011,219.5,562.4011,231.5,574.4011,219.5,586.4011,131.5,586.4011,119.5,574.4011,131.5,562.4011" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88" x="131.5" y="579.8901">是否存在新问题？</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="108.5" y="570.8151">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="231.5" y="570.8151">否</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="63.5" y="596.4011"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="73.5" y="622.2892">修复已知问题</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="183.5" y="596.4011"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="193.5" y="622.2892">跳过问题修复环节</text><polygon fill="#F1F1F1" points="175.5,642.2012,187.5,654.2012,175.5,666.2012,163.5,654.2012,175.5,642.2012" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="117.5" y="686.2012"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="127.5" y="712.0894">提示用户升级完成</text><polygon fill="#F1F1F1" points="112.5,746.0014,238.5,746.0014,250.5,758.0014,238.5,770.0014,112.5,770.0014,100.5,758.0014,112.5,746.0014" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="112.5" y="763.4903">是否需要回滚到原有系统?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="89.5" y="754.4154">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="250.5" y="754.4154">否</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="44.5" y="780.0014"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="54.5" y="805.8895">回滚到原系统</text><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="190.5" y="780.0014"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="200.5" y="805.8895">达到期限后清理原系统</text><polygon fill="#F1F1F1" points="175.5,825.8015,187.5,837.8015,175.5,849.8015,163.5,837.8015,175.5,825.8015" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="39.8001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="360.5" y="143.8001"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="370.5" y="169.6882">提示用户检查环境</text><polygon fill="#F1F1F1" points="297,855.8015,309,867.8015,297,879.8015,285,867.8015,297,855.8015" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="297" cy="910.8015" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="297" cy="910.8015" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="297" x2="297" y1="30" y2="50"/><polygon fill="#181818" points="293,40,297,50,301,40,297,44" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="183.6003" y2="203.6003"/><polygon fill="#181818" points="171.5,193.6003,175.5,203.6003,179.5,193.6003,175.5,197.6003" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="243.4004" y2="263.4004"/><polygon fill="#181818" points="171.5,253.4004,175.5,263.4004,179.5,253.4004,175.5,257.4004" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="303.2006" y2="323.2006"/><polygon fill="#181818" points="171.5,313.2006,175.5,323.2006,179.5,313.2006,175.5,317.2006" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="363.0007" y2="383.0007"/><polygon fill="#181818" points="171.5,373.0007,175.5,383.0007,179.5,373.0007,175.5,377.0007" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="422.8008" y2="442.8008"/><polygon fill="#181818" points="171.5,432.8008,175.5,442.8008,179.5,432.8008,175.5,436.8008" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="482.601" y2="502.601"/><polygon fill="#181818" points="171.5,492.601,175.5,502.601,179.5,492.601,175.5,496.601" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="119.5" x2="109.5" y1="574.4011" y2="574.4011"/><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="109.5" y1="574.4011" y2="596.4011"/><polygon fill="#181818" points="105.5,586.4011,109.5,596.4011,113.5,586.4011,109.5,590.4011" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="231.5" x2="241.5" y1="574.4011" y2="574.4011"/><line style="stroke:#181818;stroke-width:1.0;" x1="241.5" x2="241.5" y1="574.4011" y2="596.4011"/><polygon fill="#181818" points="237.5,586.4011,241.5,596.4011,245.5,586.4011,241.5,590.4011" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="109.5" y1="636.2012" y2="654.2012"/><line style="stroke:#181818;stroke-width:1.0;" x1="109.5" x2="163.5" y1="654.2012" y2="654.2012"/><polygon fill="#181818" points="153.5,650.2012,163.5,654.2012,153.5,658.2012,157.5,654.2012" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="241.5" x2="241.5" y1="636.2012" y2="654.2012"/><line style="stroke:#181818;stroke-width:1.0;" x1="241.5" x2="187.5" y1="654.2012" y2="654.2012"/><polygon fill="#181818" points="197.5,650.2012,187.5,654.2012,197.5,658.2012,193.5,654.2012" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="542.4011" y2="562.4011"/><polygon fill="#181818" points="171.5,552.4011,175.5,562.4011,179.5,552.4011,175.5,556.4011" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="666.2012" y2="686.2012"/><polygon fill="#181818" points="171.5,676.2012,175.5,686.2012,179.5,676.2012,175.5,680.2012" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="100.5" x2="90.5" y1="758.0014" y2="758.0014"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="90.5" y1="758.0014" y2="780.0014"/><polygon fill="#181818" points="86.5,770.0014,90.5,780.0014,94.5,770.0014,90.5,774.0014" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="250.5" x2="260.5" y1="758.0014" y2="758.0014"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="260.5" y1="758.0014" y2="780.0014"/><polygon fill="#181818" points="256.5,770.0014,260.5,780.0014,264.5,770.0014,260.5,774.0014" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="90.5" y1="819.8015" y2="837.8015"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="163.5" y1="837.8015" y2="837.8015"/><polygon fill="#181818" points="153.5,833.8015,163.5,837.8015,153.5,841.8015,157.5,837.8015" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="260.5" y1="819.8015" y2="837.8015"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="187.5" y1="837.8015" y2="837.8015"/><polygon fill="#181818" points="197.5,833.8015,187.5,837.8015,197.5,841.8015,193.5,837.8015" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="726.0014" y2="746.0014"/><polygon fill="#181818" points="171.5,736.0014,175.5,746.0014,179.5,736.0014,175.5,740.0014" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="216.5" x2="175.5" y1="121.8001" y2="121.8001"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="121.8001" y2="143.8001"/><polygon fill="#181818" points="171.5,133.8001,175.5,143.8001,179.5,133.8001,175.5,137.8001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="377.5" x2="418.5" y1="121.8001" y2="121.8001"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="418.5" y1="121.8001" y2="143.8001"/><polygon fill="#181818" points="414.5,133.8001,418.5,143.8001,422.5,133.8001,418.5,137.8001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="175.5" y1="849.8015" y2="867.8015"/><line style="stroke:#181818;stroke-width:1.0;" x1="175.5" x2="285" y1="867.8015" y2="867.8015"/><polygon fill="#181818" points="275,863.8015,285,867.8015,275,871.8015,279,867.8015" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="418.5" y1="183.6003" y2="867.8015"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="309" y1="867.8015" y2="867.8015"/><polygon fill="#181818" points="319,863.8015,309,867.8015,319,871.8015,315,867.8015" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="297" x2="297" y1="89.8001" y2="109.8001"/><polygon fill="#181818" points="293,99.8001,297,109.8001,301,99.8001,297,103.8001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="297" x2="297" y1="879.8015" y2="899.8015"/><polygon fill="#181818" points="293,889.8015,297,899.8015,301,889.8015,297,893.8015" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[e16ca8d07c1852dd37d25762f2236083]
@startuml
start
:升级前环境检查;
if (环境检查是否满足升级条件?) then (是)
    :下载V23镜像根目录数据;
    :备份当前系统;
    :解压V23镜像根目录数据到临时目录;
    :更改引导;
    :重启后在initrd中使用临时根目录构建/目录树，进入新系统;
    :数据迁移;
    :新系统问题检测;
    if (是否存在新问题？) then (是)
        :修复已知问题;
    else (否)
       :跳过问题修复环节;
    endif
    :提示用户升级完成;
    if (是否需要回滚到原有系统?) then (是)
        :回滚到原系统;
    else (否)
        :达到期限后清理原系统;
    endif
else (否)
    :提示用户检查环境;
endif
stop
@enduml

PlantUML version 1.2022.5(Sat Apr 30 18:55:52 GMT+08:00 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>